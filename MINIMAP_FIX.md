# ğŸ—ºï¸ å°åœ°åœ–ç‹€æ…‹ä¿å­˜ä¿®å¾©

## å•é¡Œæè¿°
å°åœ°åœ–çš„é–‹å•Ÿç‹€æ…‹ç„¡æ³•æ­£ç¢ºä¿å­˜å’Œæ¢å¾©ã€‚æ¯æ¬¡é‡æ–°å•Ÿå‹•éŠæˆ²å¾Œï¼Œå³ä½¿ä¹‹å‰é–‹å•Ÿäº†å°åœ°åœ–ï¼Œé‡å•Ÿå¾Œä»ç„¶æ˜¯é—œé–‰ç‹€æ…‹ã€‚

## æ ¹æœ¬åŸå› 
é›–ç„¶è¨­å®šæª”æ­£ç¢ºä¿å­˜äº† `show_minimap: true`ï¼Œä¸¦ä¸”åœ¨å•Ÿå‹•æ™‚ä¹Ÿæ­£ç¢ºè¼‰å…¥ä¸¦èª¿ç”¨äº† `output_manager.show_minimap()`ï¼Œä½†å°åœ°åœ–æ²’æœ‰åˆå§‹åŒ–å…§å®¹æ•¸æ“šï¼ˆ`minimap_lines` ç‚ºç©ºï¼‰ï¼Œå°è‡´å³ä½¿å°åœ°åœ–ç‹€æ…‹æ˜¯é–‹å•Ÿçš„ï¼Œç•«é¢ä¸Šä¹Ÿçœ‹ä¸åˆ°ä»»ä½•å…§å®¹ï¼Œçµ¦äººçš„æ„Ÿè¦ºå°±åƒæ˜¯å°åœ°åœ–æ²’æœ‰é–‹å•Ÿã€‚

## ä¿®å¾©æ–¹æ¡ˆ

### 1. å•é¡Œåˆ†æ
```rust
// è¨­å®šæª”æ­£ç¢ºä¿å­˜
{
  "show_minimap": true  // âœ… æ­£ç¢º
}

// å•Ÿå‹•æ™‚æ­£ç¢ºè¼‰å…¥
if game_settings.show_minimap {
    output_manager.show_minimap();  // âœ… ç‹€æ…‹å·²è¨­ç‚º true
}

// ä½†æ˜¯ï¼minimap_lines ä»ç„¶æ˜¯ç©ºçš„
minimap_lines: Vec::new()  // âŒ æ²’æœ‰å…§å®¹
```

### 2. ä¿®å¾©å…§å®¹
åœ¨ `src/main.rs` ä¸­ï¼Œé€²å…¥ä¸»å¾ªç’°å‰æ·»åŠ å°åœ°åœ–åˆå§‹åŒ–é‚è¼¯ï¼š

```rust
// å¦‚æœå°åœ°åœ–å·²é–‹å•Ÿï¼Œåˆå§‹åŒ–å…¶å…§å®¹
if output_manager.is_minimap_open() {
    if let Some(current_map) = game_world.get_current_map() {
        let mut minimap_data = vec![format!("ã€ä½ç½®: ({}, {})ã€‘", me.x, me.y)];
        
        // æª¢æŸ¥å››å€‹æ–¹å‘çš„åœ°å½¢
        // ä¸Šæ–¹
        if me.y > 0 {
            if let Some(point) = current_map.get_point(me.x, me.y - 1) {
                let walkable = if point.walkable { 'âœ“' } else { 'âœ—' };
                minimap_data.push(format!("â†‘ {} {}", point.description, walkable));
            }
        }
        // ... å…¶ä»–æ–¹å‘
        
        output_manager.update_minimap(minimap_data);
    }
}
```

### 3. ä¿®æ”¹æª”æ¡ˆ
- âœ… `src/main.rs` - æ·»åŠ å°åœ°åœ–åˆå§‹åŒ–é‚è¼¯ï¼ˆç´„ 50 è¡Œï¼‰

## æ¸¬è©¦æ­¥é©Ÿ

1. **é¦–æ¬¡å•Ÿå‹•éŠæˆ²**
   ```bash
   cargo run
   ```

2. **é–‹å•Ÿå°åœ°åœ–**
   - è¼¸å…¥å‘½ä»¤ `minimap` æˆ–æŒ‰å¿«æ·éµ

3. **é€€å‡ºéŠæˆ²**
   - è¼¸å…¥ `exit` æˆ– `quit`
   - è¨­å®šæœƒè‡ªå‹•ä¿å­˜åˆ° `worlds/settings.json`

4. **é‡æ–°å•Ÿå‹•éŠæˆ²**
   ```bash
   cargo run
   ```
   - âœ… å°åœ°åœ–æ‡‰è©²è‡ªå‹•é–‹å•Ÿä¸¦é¡¯ç¤ºå…§å®¹
   - âœ… å¯ä»¥åœ¨å³ä¸Šè§’çœ‹åˆ°ä½ç½®å’Œå‘¨åœåœ°å½¢ä¿¡æ¯

## é©—è­‰çµæœ

### å•Ÿå‹•æ™‚çš„è¼¸å‡º
```
è¼‰å…¥è¨­å®š: show_minimap = true
å°åœ°åœ–å·²é–‹å•Ÿ
âœ… è¼‰å…¥äº† 5 å€‹äº‹ä»¶
...
```

### ç•«é¢å³ä¸Šè§’é¡¯ç¤º
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã€ä½ç½®: (50, 50)ã€‘           â”‚
â”‚ â†‘ èŒ‚å¯†çš„æ£®æ— âœ“              â”‚
â”‚ â†“ ç©ºæ› çš„å¹³åŸ âœ“              â”‚
â”‚ â† é™¡å³­çš„å±±å£ âœ—              â”‚
â”‚ â†’ æ¸…æ¾ˆçš„æºªæµ âœ“              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## é¡å¤–æ”¹é€²

### èª¿è©¦è¼¸å‡º
æ·»åŠ äº†èª¿è©¦è¨Šæ¯ä¾†ç¢ºèªè¨­å®šè¼‰å…¥ï¼š
```rust
output_manager.print(format!("è¼‰å…¥è¨­å®š: show_minimap = {}", game_settings.show_minimap));
if game_settings.show_minimap {
    output_manager.show_minimap();
    output_manager.print("å°åœ°åœ–å·²é–‹å•Ÿ".to_string());
}
```

### è¨­å®šæª”ä½ç½®
```
worlds/settings.json
```

### è¨­å®šæª”æ ¼å¼
```json
{
  "show_minimap": true
}
```

## ç›¸é—œåŠŸèƒ½

### å°åœ°åœ–æ“ä½œ
- **é–‹å•Ÿ/é—œé–‰**ï¼šè¼¸å…¥ `minimap` å‘½ä»¤
- **ç‹€æ…‹æŒä¹…åŒ–**ï¼šè‡ªå‹•ä¿å­˜åˆ° `worlds/settings.json`
- **è‡ªå‹•æ¢å¾©**ï¼šå•Ÿå‹•æ™‚è‡ªå‹•è¼‰å…¥ä¸¦åˆå§‹åŒ–

### é¡¯ç¤ºå…§å®¹
- ç•¶å‰åº§æ¨™ä½ç½®
- ä¸Šä¸‹å·¦å³å››å€‹æ–¹å‘çš„åœ°å½¢
- åœ°å½¢å¯è¡Œèµ°ç‹€æ…‹ï¼ˆâœ“ å¯èµ° / âœ— ä¸å¯èµ°ï¼‰

## æŠ€è¡“ç´°ç¯€

### ç‹€æ…‹ç®¡ç†
```rust
pub struct OutputManager {
    show_minimap: bool,         // æ˜¯å¦é¡¯ç¤ºå°åœ°åœ–
    minimap_lines: Vec<String>, // å°åœ°åœ–å…§å®¹
    // ...
}
```

### ä¿å­˜æµç¨‹
```
éŠæˆ²é€€å‡º
â””â”€> run_main_loop è¿”å›
    â””â”€> app.rs çš„é€€å‡ºè™•ç†
        â””â”€> GameSettings::save()
            â””â”€> å¯«å…¥ worlds/settings.json
```

### è¼‰å…¥æµç¨‹
```
éŠæˆ²å•Ÿå‹•
â””â”€> main.rs
    â”œâ”€> GameSettings::load()
    â”‚   â””â”€> è®€å– worlds/settings.json
    â”œâ”€> show_minimap() è¨­ç½®ç‹€æ…‹
    â””â”€> update_minimap() åˆå§‹åŒ–å…§å®¹ âœ¨ æ–°å¢
```

## å·²çŸ¥é™åˆ¶

1. **å…§å®¹æ›´æ–°**ï¼šå°åœ°åœ–å…§å®¹åœ¨ç§»å‹•æ™‚æ‰æ›´æ–°
2. **é¡¯ç¤ºç¯„åœ**ï¼šåªé¡¯ç¤ºä¸Šä¸‹å·¦å³å››å€‹æ–¹å‘
3. **ä¿å­˜æ™‚æ©Ÿ**ï¼šåªåœ¨éŠæˆ²æ­£å¸¸é€€å‡ºæ™‚ä¿å­˜

## æœªä¾†æ”¹é€²

- [ ] å¢åŠ å°åœ°åœ–çš„é¡¯ç¤ºç¯„åœï¼ˆ3x3 æˆ– 5x5ï¼‰
- [ ] å¯¦æ™‚æ›´æ–°å°åœ°åœ–å…§å®¹
- [ ] æ·»åŠ æ›´å¤šè¦–è¦ºå…ƒç´ ï¼ˆé¡è‰²ã€åœ–æ¨™ï¼‰
- [ ] æ”¯æŒå°åœ°åœ–å¤§å°èª¿æ•´

---

**å•é¡Œå·²ä¿®å¾©ï¼** âœ… å°åœ°åœ–ç‹€æ…‹ç¾åœ¨å¯ä»¥æ­£ç¢ºä¿å­˜å’Œæ¢å¾©äº†ã€‚
