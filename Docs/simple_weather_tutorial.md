# ç°¡å–®ç¯„ä¾‹ï¼šå¤©æ°£äº‹ä»¶

## æœ€ç°¡å–®çš„å¤©æ°£äº‹ä»¶

é€™æ˜¯ä¸€å€‹æœ€åŸºæœ¬çš„å¤©æ°£äº‹ä»¶ç¯„ä¾‹ï¼Œé©åˆåˆå­¸è€…ç†è§£ã€‚

### æª”æ¡ˆä½ç½®
`worlds/beginWorld/events/simple_weather.json`

### äº‹ä»¶å…§å®¹
```json
{
  "id": "simple_weather",
  "name": "ç°¡å–®å¤©æ°£",
  "description": "æ¯5åˆ†é˜éš¨æ©Ÿè®Šæ›æ™´å¤©æˆ–é›¨å¤©",
  "trigger": {
    "type": "time",
    "schedule": "*/5 * * * *"
  },
  "where": {
    "map": "beginMap"
  },
  "actions": [
    {
      "type": "random_action",
      "actions": [
        {
          "weight": 0.5,
          "action": {
            "type": "message",
            "text": "â˜€ï¸ å¤©æ°£è®Šæ™´äº†"
          }
        },
        {
          "weight": 0.5,
          "action": {
            "type": "message",
            "text": "ğŸŒ§ï¸ é–‹å§‹ä¸‹é›¨äº†"
          }
        }
      ]
    }
  ],
  "state": {
    "repeatable": true,
    "cooldown": 0,
    "max_triggers": -1
  }
}
```

## èªªæ˜

### è§¸ç™¼æ¢ä»¶
- `"schedule": "*/5 * * * *"` - æ¯5åˆ†é˜è§¸ç™¼ä¸€æ¬¡

### å‹•ä½œ
- `random_action` - éš¨æ©ŸåŸ·è¡Œä¸€å€‹å‹•ä½œ
- å…©å€‹å‹•ä½œçš„æ¬Šé‡éƒ½æ˜¯ 0.5ï¼Œæ‰€ä»¥å„æœ‰ 50% æ©Ÿç‡

### çµæœ
æ¯5åˆ†é˜æœƒéš¨æ©Ÿé¡¯ç¤ºï¼š
- "â˜€ï¸ å¤©æ°£è®Šæ™´äº†" (50% æ©Ÿç‡)
- "ğŸŒ§ï¸ é–‹å§‹ä¸‹é›¨äº†" (50% æ©Ÿç‡)

## é€²éšï¼šåŠ å…¥åœ°åœ–å±¬æ€§

å¦‚æœè¦åŒæ™‚æ›´æ–°åœ°åœ–çš„å¤©æ°£å±¬æ€§ï¼š

```json
{
  "actions": [
    {
      "type": "random_action",
      "actions": [
        {
          "weight": 0.5,
          "action": {
            "type": "set_map_property",
            "map": "beginMap",
            "property": "å¤©æ°£",
            "value": "æ™´å¤©"
          }
        },
        {
          "weight": 0.5,
          "action": {
            "type": "set_map_property",
            "map": "beginMap",
            "property": "å¤©æ°£",
            "value": "é›¨å¤©"
          }
        }
      ]
    },
    {
      "type": "message",
      "text": "å¤©æ°£è®ŠåŒ–äº†ï¼"
    }
  ]
}
```

## æ›´å¤šç¯„ä¾‹

### ä¸‰ç¨®å¤©æ°£ï¼ˆä¸åŒæ©Ÿç‡ï¼‰
```json
{
  "type": "random_action",
  "actions": [
    {
      "weight": 0.5,
      "action": { "type": "message", "text": "â˜€ï¸ æ™´å¤©" }
    },
    {
      "weight": 0.3,
      "action": { "type": "message", "text": "â˜ï¸ é™°å¤©" }
    },
    {
      "weight": 0.2,
      "action": { "type": "message", "text": "ğŸŒ§ï¸ é›¨å¤©" }
    }
  ]
}
```

æ©Ÿç‡åˆ†å¸ƒï¼š
- æ™´å¤©ï¼š50% (0.5 / 1.0)
- é™°å¤©ï¼š30% (0.3 / 1.0)
- é›¨å¤©ï¼š20% (0.2 / 1.0)

### ä½¿ç”¨æ•´æ•¸æ¬Šé‡
```json
{
  "type": "random_action",
  "actions": [
    {
      "weight": 5,
      "action": { "type": "message", "text": "â˜€ï¸ æ™´å¤©" }
    },
    {
      "weight": 3,
      "action": { "type": "message", "text": "â˜ï¸ é™°å¤©" }
    },
    {
      "weight": 2,
      "action": { "type": "message", "text": "ğŸŒ§ï¸ é›¨å¤©" }
    }
  ]
}
```

çµæœèˆ‡ä¸Šé¢ç›¸åŒï¼ˆ5:3:2 = 50%:30%:20%ï¼‰

## æ¸¬è©¦æ–¹æ³•

1. å°‡ç¯„ä¾‹å­˜ç‚º JSON æª”æ¡ˆ
2. æ”¾å…¥ `worlds/beginWorld/events/` ç›®éŒ„
3. å•Ÿå‹•éŠæˆ²
4. ç­‰å¾…5åˆ†é˜
5. è§€å¯Ÿæ˜¯å¦å‡ºç¾å¤©æ°£è¨Šæ¯

## å¸¸è¦‹å•é¡Œ

### Q: æ¬Šé‡å¯ä»¥æ˜¯å°æ•¸å—ï¼Ÿ
A: å¯ä»¥ï¼0.5ã€0.3ã€1.5 éƒ½å¯ä»¥ã€‚

### Q: æ¬Šé‡å¯ä»¥æ˜¯æ•´æ•¸å—ï¼Ÿ
A: å¯ä»¥ï¼5ã€3ã€2 éƒ½å¯ä»¥ï¼Œæ•ˆæœèˆ‡ 0.5ã€0.3ã€0.2 ç›¸åŒã€‚

### Q: æ¬Šé‡ç¸½å’Œå¿…é ˆæ˜¯ 1 å—ï¼Ÿ
A: ä¸éœ€è¦ï¼ç³»çµ±æœƒè‡ªå‹•è¨ˆç®—ç¸½å’Œä¸¦æŒ‰æ¯”ä¾‹åˆ†é…æ©Ÿç‡ã€‚

### Q: å¦‚ä½•è®“æŸå€‹é¸é …å‡ºç¾æ©Ÿç‡æ›´é«˜ï¼Ÿ
A: å¢åŠ å®ƒçš„æ¬Šé‡å€¼å³å¯ã€‚ä¾‹å¦‚è¦è®“æ™´å¤©å‡ºç¾æ›´å¤šï¼Œå¯ä»¥è¨­å®š `weight: 0.8`ã€‚

## ä¸‹ä¸€æ­¥

å­¸æœƒåŸºæœ¬ç”¨æ³•å¾Œï¼Œå¯ä»¥åƒè€ƒï¼š
- `weather_event.json` - å®Œæ•´çš„5ç¨®å¤©æ°£ç³»çµ±
- `environment_events.json` - å¤©æ°£èˆ‡æº«åº¦é›™ç³»çµ±
- `Docs/probability_event_system.md` - å®Œæ•´æŠ€è¡“æ–‡æª”
