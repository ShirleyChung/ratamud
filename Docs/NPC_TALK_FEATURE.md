# NPC 說話功能測試文檔

## 功能概述
NPC 可以設置台詞和說話積極度。當玩家來到 NPC 所在位置時，NPC 會根據積極度隨機說話。

## 新增字段
- `dialogues`: HashMap<String, String> - 台詞庫（場景 -> 台詞內容）
- `talk_eagerness`: u8 (0-100) - 說話積極度，預設為 100

## 新增命令

### 1. 設置台詞
```
setdialogue <npc名稱> <場景> <台詞內容>
```
或簡寫：
```
setdia <npc名稱> <場景> <台詞內容>
```

範例：
```
setdialogue 商人 見面 哈囉！你好，來看看我的商品吧！
```

### 2. 設置說話積極度
```
seteagerness <npc名稱> <積極度>
```
或簡寫：
```
setea <npc名稱> <積極度>
```

範例：
```
seteagerness 商人 100   # 100% 一定會說話
seteagerness 商人 50    # 50% 機率說話
seteagerness 商人 0     # 0% 不會說話
```

## 手動測試步驟

### 測試 1: 100% 說話積極度
```bash
# 1. 啟動遊戲
cargo run --release

# 2. 創建 NPC（在玩家附近）
create npc m 商人甲

# 3. 設置台詞
setdialogue 商人甲 見面 哈囉！你好，來看看我的商品吧！

# 4. 設置積極度為 100
seteagerness 商人甲 100

# 5. 移動離開然後返回，觀察商人是否每次都說話
goto 52 52
goto 50 50
goto 52 52
# 預期：每次到達商人位置時，都會看到 "💬 商人甲 說：「哈囉！你好，來看看我的商品吧！」"
```

### 測試 2: 50% 說話積極度
```bash
# 1. 設置積極度為 50
seteagerness 商人甲 50

# 2. 多次移動到商人位置
goto 52 52
goto 50 50
goto 52 52
goto 50 50
goto 52 52
goto 50 50
goto 52 52
# 預期：大約一半的時候會看到商人說話
```

### 測試 3: 0% 說話積極度
```bash
# 1. 設置積極度為 0
seteagerness 商人甲 0

# 2. 移動到商人位置
goto 52 52
# 預期：商人不會說話
```

## 功能實現說明

1. **台詞觸發時機**：當玩家執行 `look` 或移動到新位置時，如果該位置有 NPC，會自動檢查 NPC 的「見面」場景台詞。

2. **隨機機制**：使用 `rand` 庫生成 0-99 的隨機數，如果小於積極度值則觸發說話。

3. **數據持久化**：台詞和積極度會保存到 NPC 的 JSON 文件中。

4. **商人預設值**：新創建的 NPC 預設說話積極度為 100（商人類型特別適合設置為 100）。

## 支援的場景
目前支援的場景：
- `見面`: 玩家來到 NPC 所在位置時觸發

未來可擴展更多場景，例如：
- `告別`: 玩家離開時
- `交易`: 交易時
- `戰鬥`: 戰鬥時
- 等等...
